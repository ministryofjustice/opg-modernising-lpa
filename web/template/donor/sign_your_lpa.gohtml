{{ template "page" . }}

{{ define "pageTitle" }}{{ tr .App "signYourLpa" }}{{ end }}

{{ define "main" }}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        {{ tr .App "signYourLpa" }}
      </h1>

      <h2 class="govuk-heading-m">{{ tr .App "signingYourLpaIsAnImportant" }}</h2>

      {{ template "details" (details . "whatHappensIfIWantToMakeChanges" "whatHappensIfIWantToMakeChangesContent" false) }}

      {{ $lpaTypeLegalTerm := lowerFirst (tr .App .Donor.Type.String) }}

      <p class="govuk-body">{{ trFormat .App "bySigningIConfirm" "LpaType" $lpaTypeLegalTerm }}</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>{{ tr .App "iHaveReadLpa" }}</li>
        {{ if .Donor.Type.IsPersonalWelfare }}
          <li>{{ trFormat .App "iGiveAttorneysAuthority" "LpaType" $lpaTypeLegalTerm }}</li>
        {{ else }}
          {{ if .Donor.WhenCanTheLpaBeUsed.IsHasCapacity }}
            <li>{{ tr .App "iGiveAttorneysAuthorityWhenRegistered" }}</li>
          {{ else }}
            <li>{{ tr .App "iGiveAttorneysAuthorityWhenLostMentalCapacity" }}</li>
          {{ end }}
        {{ end }}
        {{ if .Donor.Type.IsPersonalWelfare }}
          {{ if .Donor.LifeSustainingTreatmentOption.IsOptionA }}
            <li>{{ tr .App "iGiveMyAttorneysAuthorityLifeSustainingTreatment" }}</li>
          {{ else }}
            <li>{{ trHtml .App "iDoNotGiveMyAttorneysAuthorityLifeSustainingTreatment" }}</li>
          {{ end }}
        {{ end }}
        {{ if gt (len .Donor.PeopleToNotify) 0 }}
          <li>{{ trFormatCount .App "iHaveChosenNPeopleToNotify" (len .Donor.PeopleToNotify) }}</li>
        {{ else }}
          <li>{{ tr .App "iHaveNotChosenToNotifyAnyone" }}</li>
        {{ end }}
        <li>{{ tr .App "infoIProvidedCanBeUsedByOpg" }}</li>
      </ul>

      <form novalidate method="post">
        <div class="govuk-summary-card">
          <div class="govuk-summary-card__title-wrapper">
            <span class="govuk-summary-card__title">{{ tr .App "yourSignature" }}</span>
          </div>
          <div class="govuk-summary-card__content">
            <p class="govuk-body govuk-!-font-weight-bold">
              {{ trFormat .App "iConfirmThat" "DonorFullName" .Donor.Donor.FullName }}
            </p>

            <div class="govuk-form-group {{ if .Errors.Has "sign-lpa" }}govuk-form-group--error{{ end }}">
              {{ template "error-message" (errorMessage . "sign-lpa") }}

              <div class="govuk-checkboxes {{ if .Errors.Has "sign-lpa" }}govuk-checkboxes--error{{ end }}">
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="f-sign-lpa" name="sign-lpa" type="checkbox" value="{{ .WantToSignFormValue }}" {{ if .Donor.WantToSignLpa }}checked{{ end }}>
                  <label class="govuk-label govuk-checkboxes__label" for="f-sign-lpa">
                    {{ tr .App "iWantToSignThisLpa" }}
                  </label>
                </div>

                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="f-sign-lpa-2" name="sign-lpa" type="checkbox" value="{{ .WantToApplyFormValue }}" {{ if .Donor.WantToApplyForLpa }}checked{{ end }}>
                  <label class="govuk-label govuk-checkboxes__label" for="f-sign-lpa-2">
                    {{ tr .App "wantToApply" }}
                  </label>
                </div>
              </div>
            </div>

            <p class="govuk-body">{{ tr .App "whenYouTickAndClick" }}</p>
          </div>
        </div>

        {{ template "details" (details . "howTickingActsAsSignature" "howTickingActsAsSignatureContent" false) }}

        {{ template "data-loss-warning-dialog" . }}

        <div class="govuk-button-group">
          <button type="submit" id="save-and-continue-btn" class="govuk-button" data-module="govuk-button">
            {{ tr .App "submitMySignature" }}
          </button>
          <a href="{{ link .App (global.Paths.TaskList.Format .App.LpaID) }}" id="return-to-tasklist-btn" class="govuk-button govuk-button--secondary">{{ tr .App "returnToTaskList" }}</a>
        </div>
        {{ template "csrf-field" . }}
      </form>
    </div>
  </div>
{{ end }}
