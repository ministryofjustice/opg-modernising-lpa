{{ template "page" . }}

{{ define "pageTitle" }}{{ tr .App "signTheLpaOnBehalfOfTheDonor" }}{{ end }}

{{ define "main" }}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        {{ trFormat .App "signTheLpaOnBehalfOf" "DonorFullName" .Donor.Donor.FullName }}
      </h1>

      <h2 class="govuk-heading-m">{{ tr .App "signingAnLpaIsAnImportant" }}</h2>

      {{ template "details" (details . "whatHappensIfIWantToMakeChanges" "whatHappensIfIWantToMakeChangesContent" false) }}

      {{ $lpaTypeLegalTerm := tr .App .Donor.Type.LegalTermTransKey }}

      <p class="govuk-body govuk-!-font-weight-bold">{{ trFormat .App "bySigningOnBehalfIConfirm" "DonorFullName" .Donor.Donor.FullName }}</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>{{ tr .App "theDonorHasReadLpa" }}</li>
        {{ if .Donor.Type.IsHealthWelfare }}
          <li>{{ trFormat .App "iGiveAttorneysAuthority" "LpaType" $lpaTypeLegalTerm }}</li>
        {{ else }}
          {{ if .Donor.WhenCanTheLpaBeUsed.IsHasCapacity }}
            <li>{{ tr .App "theDonorGivesAttorneysAuthorityWhenRegistered" }}</li>
          {{ else }}
            <li>{{ tr .App "theDonorGivesAttorneysAuthorityWhenLostMentalCapacity" }}</li>
          {{ end }}
        {{ end }}
        {{ if .Donor.Type.IsHealthWelfare }}
          {{ if .Donor.LifeSustainingTreatmentOption.IsOptionA }}
            <li>{{ tr .App "theDonorGivesAttorneysAuthorityLifeSustainingTreatment" }}</li>
          {{ else }}
            <li>{{ trHtml .App "theDonorDoesNotGiveAttorneysAuthorityLifeSustainingTreatment" }}</li>
          {{ end }}
        {{ end }}
        {{ if gt (len .Donor.PeopleToNotify) 0 }}
          <li>{{ trFormatCount .App "theyHaveChosenNPeopleToNotify" (len .Donor.PeopleToNotify) }}</li>
        {{ else }}
          <li>{{ tr .App "theyHaveNotChosenToNotifyAnyone" }}</li>
        {{ end }}
        <li>{{ tr .App "infoTheyProvidedCanBeUsedByOpg" }}</li>
      </ul>

      <form novalidate method="post">
        <div class="govuk-summary-card">
          <div class="govuk-summary-card__title-wrapper">
            <h2 class="govuk-summary-card__title">{{ tr .App "yourSignature" }}</h2>
          </div>
          <div class="govuk-summary-card__content">
            <p class="govuk-body govuk-!-font-weight-bold">
              {{ trFormat .App "iConfirmAsAuthorisedSignatoryThat" "SignatoryFullName" .Donor.AuthorisedSignatory.FullName }}
            </p>

            <div class="govuk-form-group {{ if .Errors.Has "sign-lpa" }}govuk-form-group--error{{ end }}">
              {{ template "error-message" (errorMessage . "sign-lpa") }}

              <div class="govuk-checkboxes">
                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="f-sign-lpa" name="sign-lpa" type="checkbox" value="{{ .WantToSignFormValue }}" {{ if .Donor.WantToSignLpa }}checked{{ end }}>
                  <label class="govuk-label govuk-checkboxes__label" for="f-sign-lpa">
                    {{ trFormat .App "donorWantsToSignThisLpa" "DonorFullName" .Donor.Donor.FullName }}
                  </label>
                </div>

                <div class="govuk-checkboxes__item">
                  <input class="govuk-checkboxes__input" id="f-sign-lpa-2" name="sign-lpa" type="checkbox" value="{{ .WantToApplyFormValue }}" {{ if .Donor.WantToApplyForLpa }}checked{{ end }}>
                  <label class="govuk-label govuk-checkboxes__label" for="f-sign-lpa-2">
                    {{ trFormat .App "donorWantsToApply" "DonorFullName" .Donor.Donor.FullName }}
                  </label>
                </div>
              </div>
            </div>

            <div class="govuk-body">{{ tr .App "whenYouTickAsAuthorisedSignatory" }}</div>
          </div>
        </div>

        {{ template "details" (details . "howTickingActsAsSignature" "howTickingActsAsSignatureContent" false) }}

        {{ template "data-loss-warning-dialog" . }}

        <div class="govuk-button-group">
          <button type="submit" id="save-and-continue-btn" class="govuk-button" data-module="govuk-button">
            {{ tr .App "submitSignature" }}
          </button>
          <a href="{{ link .App (.App.Paths.TaskList.Format .App.LpaID) }}" id="return-to-tasklist-btn" class="govuk-button govuk-button--secondary">{{ tr .App "returnToTaskList" }}</a>
        </div>
        {{ template "csrf-field" . }}
      </form>
    </div>
  </div>
{{ end }}
